{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const gallery = document.querySelector('.gallery');\n\nexport const smoothScroll = () => {\n    const galleryItem = document.querySelector('.gallery-link');\n    if (galleryItem) {\n        const itemHeight = galleryItem.getBoundingClientRect().height;\n\n        window.scrollBy({\n            top: itemHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n}\n\nexport const render = (data, moreLoad) => {\n    const fragment = new DocumentFragment();\n    const buttonWrapper = document.querySelector('.button-wrapper');\n    data.hits.map(element => {\n        \n        const link = document.createElement('a');\n        link.setAttribute('href', element.largeImageURL);\n        link.classList.add('gallery-link');\n        \n        const image = document.createElement('img');\n        image.setAttribute('src', element.webformatURL);\n        image.setAttribute('alt', element.tags);\n\n        const list = document.createElement('dl');\n\n        const dtLikes = document.createElement('dt');\n        dtLikes.innerHTML = 'Likes';\n\n        const ddLikes = document.createElement('dd');\n        ddLikes.innerHTML = element.likes;\n\n        const dtViews = document.createElement('dt');\n        dtViews.innerHTML = 'Views';\n\n        const ddViews = document.createElement('dd');\n        ddViews.innerHTML = element.views;\n\n        const dtComments = document.createElement('dt');\n        dtComments.innerHTML = 'Comments';\n\n        const ddComments = document.createElement('dd');\n        ddComments.innerHTML = element.comments;\n\n        const dtDownloads = document.createElement('dt');\n        dtDownloads.innerHTML = 'Downloads';\n\n        const ddDownloads = document.createElement('dd');\n        ddDownloads.innerHTML = element.downloads;\n\n        list.append(dtLikes);\n        list.append(ddLikes);\n        list.append(dtViews);\n        list.append(ddViews);\n        list.append(dtComments);\n        list.append(ddComments);\n        list.append(dtDownloads);\n        list.append(ddDownloads);\n\n        link.append(image);\n        link.append(list);\n        \n        if(buttonWrapper) {\n            gallery.insertBefore(link, buttonWrapper);\n        } else {\n            fragment.append(link);        \n        }\n    });\n    \n    if(!buttonWrapper) {\n        const buttonWrapper = document.createElement('div');\n        buttonWrapper.classList.add('button-wrapper');\n\n        const button = document.createElement('button');\n        button.innerHTML = 'Load more';\n        button.setAttribute('id', 'load-more');\n        button.addEventListener('click', moreLoad);\n        \n        buttonWrapper.append(button);\n        fragment.append(buttonWrapper);\n    }\n\n    gallery.append(fragment);\n    if(buttonWrapper) {\n        smoothScroll();\n    }\n}\n","import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { render } from \"./render-functions\";\n\nconst loader = document.querySelector('.loader');\n\nconst url = 'https://pixabay.com/api/';\n\nexport const fetchData = async (searchParams, moreLoad) => {\n    if (!searchParams.q) {\n        iziToast.warning({\n            message: 'Пошуковий запит не може бути порожнім!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    loader.classList.add('i-b-display');\n\n    try {\n        const { data } = await axios.get(url, { params: searchParams });\n\n        if (data.total === 0) {\n            iziToast.error({\n                message: 'Sorry, no images match your search query. Please try again!',\n                position: 'topRight',\n            });\n        } else {\n            render(data,() => moreLoad(data.total));  \n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'Something went wrong. Please try again later!',\n            position: 'topRight',\n        });\n        console.error(error);\n    } finally {\n        loader.classList.remove('i-b-display');\n    }\n};","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchData } from \"./js/pixabay-api\";\n\nconst API_KEY = '46251746-b7ef5ea5c8ec4690d00bddcb0';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector(\"#search-input\");\nconst gallery = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nconst per_page = 15;\nlet lastQuery = ''\n\nconst createQuery = async () => {\n    if(!input.value.trim() && !lastQuery) {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Please enter your search query'\n        });\n        form.elements.search.value = '';\n        return;\n    }\n    const searchParams = {\n        key: API_KEY,\n        q: lastQuery ? lastQuery : input.value.trim(),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page,\n        page\n    };\n    await fetchData(searchParams, moreLoad);\n    \n    lightbox.refresh();\n}\n\nexport const moreLoad = async (total) => {    \n    const totalPage = Math.ceil(total/per_page);\n    page += 1;\n    console.log(totalPage);\n    console.log(page);    \n    \n    if(page === totalPage) {\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight'            \n        });\n        const loadMoreButton = document.querySelector('#load-more');\n        loadMoreButton.remove();\n        createQuery(); \n    };\n}\n\nform.addEventListener('submit', e => {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    lastQuery = '';\n    page = 1;\n    \n    createQuery();\n    \n    lastQuery = input.value.trim();\n    form.elements.search.value = '';\n});\n\ndocument.addEventListener('click', (event) => {\n    if (event.target.closest('.gallery a')) {\n        lightbox.open(event.target.closest('.gallery a'));\n    }\n});\n\n\n\n\n"],"names":["gallery","smoothScroll","galleryItem","itemHeight","render","data","moreLoad","fragment","buttonWrapper","element","link","image","list","dtLikes","ddLikes","dtViews","ddViews","dtComments","ddComments","dtDownloads","ddDownloads","button","loader","url","fetchData","searchParams","iziToast","axios","error","API_KEY","form","input","lightbox","SimpleLightbox","page","per_page","lastQuery","createQuery","total","totalPage","e","event"],"mappings":"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"}