{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '46251746-b7ef5ea5c8ec4690d00bddcb0';\nconst url = 'https://pixabay.com/api/';\n\nexport const fetchData = async (searchString, page, per_page = 15) => {\n    const searchParams = {\n        key: API_KEY,\n        q: searchString,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page,\n        page\n    };\n    const { data } = await axios.get(url, { params: searchParams });\n    return data;\n};","const gallery = document.querySelector('.gallery');\n\nexport const smoothScroll = () => {\n    const galleryItem = document.querySelector('.gallery-link');\n    if (galleryItem) {\n        const itemHeight = galleryItem.getBoundingClientRect().height;\n\n        window.scrollBy({\n            top: itemHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n}\n\nexport const render = (hits) => {\n    const markup = hits.map(element => `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n                    <img \n                        class=\"gallery-image\" \n                        src=\"${element.webformatURL}\" \n                        data-source=\"${element.largeImageURL}\" \n                        alt=\"${element.tags}\"\n                    />\n                    <dl>\n                        <dt>Likes</dt>\n                        <dd>${element.likes}</dd>\n                        <dt>Views</dt>\n                        <dd>${element.views}</dd>\n                        <dt>Comments</dt>\n                        <dd>${element.comments}</dd>\n                        <dt>Downloads</dt>\n                        <dd>${element.downloads}</dd>\n                    </dl>\n                </a>\n            </li>\n    `).join();\n    gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchData } from \"./js/pixabay-api\";\nimport { render, smoothScroll } from \"./js/render-functions\";\n\nconst form = document.querySelector('form');\nconst input = document.querySelector(\"#search-input\");\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nconst per_page = 15;\nlet lastSearchQuery = '';\n\nconst toggleLoadMoreButton = hideButton => {\n    if(!gallery.hasChildNodes() || hideButton) {\n        loadMoreButton.style.display = 'none';\n    } else {\n        loadMoreButton.style.display = 'block';\n    }\n}\n\nconst toggleLoader = hideLoader => {\n    if(hideLoader) {\n        loader.classList.remove('i-b-display');\n    } else {\n        loader.classList.add('i-b-display');\n    }\n}\n\nform.addEventListener('submit', async e => {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    const searchQuery = input.value.trim();\n    lastSearchQuery = '';\n    page = 1;\n    toggleLoader();    \n    if(!searchQuery) {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Please enter your search query'\n        });\n        form.elements.search.value = '';\n        return;\n    }\n    try {\n        const {hits, total} = await fetchData(searchQuery, page, per_page);\n        render(hits);\n        lightbox.refresh();\n        const totalPages = Math.ceil(total/per_page);\n        if(total > per_page) {\n            toggleLoadMoreButton();\n        }\n        if(page === totalPages) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'            \n            });\n            \n            toggleLoadMoreButton(true);\n        };\n\n    } \n    catch (error) {\n        console.log(error);\n    }\n    finally {\n        toggleLoader(true);\n    }\n    \n    lastSearchQuery = searchQuery;\n    form.elements.search.value = '';   \n});\n\nloadMoreButton.addEventListener('click', async (e) => {\n    e.preventDefault();\n    toggleLoader();\n    page += 1;    \n    try {\n        const {hits, total} = await fetchData(lastSearchQuery, page, per_page);\n        render(hits);\n        smoothScroll();\n        lightbox.refresh();\n        const totalPages = Math.ceil(total/per_page);\n        if(total > per_page) {\n            toggleLoadMoreButton();\n        }\n        if(page === totalPages) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'            \n            });\n            \n            toggleLoadMoreButton(true);\n        };\n\n    } \n    catch (error) {\n        console.log(error);\n    }\n    finally {\n        toggleLoader(true);\n    }\n})\n\nwindow.addEventListener('load', () => {\n    toggleLoadMoreButton();\n});\n\n\n\n\n"],"names":["API_KEY","url","fetchData","searchString","page","per_page","searchParams","data","axios","gallery","smoothScroll","galleryItem","itemHeight","render","hits","markup","element","form","input","loadMoreButton","loader","lightbox","SimpleLightbox","lastSearchQuery","toggleLoadMoreButton","hideButton","toggleLoader","hideLoader","e","searchQuery","iziToast","total","totalPages","error"],"mappings":"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"}