{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '46251746-b7ef5ea5c8ec4690d00bddcb0';\nconst url = 'https://pixabay.com/api/';\n\nexport const fetchData = async (searchString, page, per_page = 15) => {\n    const searchParams = {\n        key: API_KEY,\n        q: searchString,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page,\n        page\n    };\n    const { data } = await axios.get(url, { params: searchParams });\n    return data;\n};","const gallery = document.querySelector('.gallery');\n\nexport const smoothScroll = () => {\n    const galleryItem = document.querySelector('.gallery-link');\n    if (galleryItem) {\n        const itemHeight = galleryItem.getBoundingClientRect().height;\n\n        window.scrollBy({\n            top: itemHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n}\n\nexport const render = (hits) => {\n    const markup = hits.map(element => `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n                    <img \n                        class=\"gallery-image\" \n                        src=\"${element.webformatURL}\" \n                        data-source=\"${element.largeImageURL}\" \n                        alt=\"${element.tags}\"\n                    />\n                    <dl>\n                        <dt>Likes</dt>\n                        <dd>${element.likes}</dd>\n                        <dt>Views</dt>\n                        <dd>${element.views}</dd>\n                        <dt>Comments</dt>\n                        <dd>${element.comments}</dd>\n                        <dt>Downloads</dt>\n                        <dd>${element.downloads}</dd>\n                    </dl>\n                </a>\n            </li>\n    `).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchData } from \"./js/pixabay-api\";\nimport { render, smoothScroll } from \"./js/render-functions\";\n\nconst form = document.querySelector('form');\nconst input = document.querySelector(\"#search-input\");\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nconst per_page = 15;\nlet lastSearchQuery = '';\n\nconst showLoadMoreButton = () => loadMoreButton.style.display = 'block';\nconst hideLoadMoreButton = () => loadMoreButton.style.display = 'none';\n\nconst showLoader = () => loader.classList.add('i-b-display');\nconst hideLoader = () => loader.classList.remove('i-b-display');\n\nconst handleError = (error) => {\n    console.error(error);\n    iziToast.error({\n        message: 'An error occurred. Please try again.',\n        position: 'topRight'\n    });\n};\n\nconst updateGallery = async () => {\n    try {\n        const { hits, total } = await fetchData(lastSearchQuery, page, per_page);\n        render(hits);        \n        lightbox.refresh();\n\n        const totalPages = Math.ceil(total / per_page);\n\n        if (hits.length === 0) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"Sorry, nothing was found for your request.\",\n                position: 'topRight'\n            });\n        };\n        if (total > per_page) showLoadMoreButton();\n        if (page === totalPages) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'\n            });\n            hideLoadMoreButton();\n        }\n    } catch (error) {\n        handleError(error);\n    } finally {\n        hideLoader();\n    }\n};\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    const searchQuery = input.value.trim();\n\n    if (!searchQuery) {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Please enter your search query'\n        });\n        hideLoadMoreButton();\n        return;\n    }\n\n    lastSearchQuery = searchQuery;\n    page = 1;\n    showLoader();\n    await updateGallery();\n    form.elements.search.value = '';\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    showLoader();\n    page += 1;\n    await updateGallery();\n    smoothScroll();\n});\n\nwindow.addEventListener('load', hideLoadMoreButton);\n"],"names":["API_KEY","url","fetchData","searchString","page","per_page","searchParams","data","axios","gallery","smoothScroll","galleryItem","itemHeight","render","hits","markup","element","form","input","loadMoreButton","loader","lightbox","SimpleLightbox","lastSearchQuery","showLoadMoreButton","hideLoadMoreButton","showLoader","hideLoader","handleError","error","iziToast","updateGallery","total","totalPages","e","searchQuery"],"mappings":"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"}